<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.52">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; Proportional rule – Decentralized Finance and Blockchains</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<link href="./gt.html" rel="prev">
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./gt.html">Game Theory</a></li><li class="breadcrumb-item"><a href="./07-proportional-sharing.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Proportional rule</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Decentralized Finance and Blockchains</a> 
        <div class="sidebar-tools-main">
    <a href="./Decentralized-Finance-and-Blockchains.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prelim.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Preliminaries</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./cs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Computer Science</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./distributed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to distributed computing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DolevStrong.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">The Dolev-Strong protocol</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LongestChain.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Longest-chain protocols</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ProofofWork.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Proof of Work</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./gt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Game Theory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-proportional-sharing.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Proportional rule</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#axioms" id="toc-axioms" class="nav-link active" data-scroll-target="#axioms"><span class="header-section-number">7.1</span> Axioms</a></li>
  <li><a href="#characterization" id="toc-characterization" class="nav-link" data-scroll-target="#characterization"><span class="header-section-number">7.2</span> Characterization</a></li>
  <li><a href="#risk-aversion" id="toc-risk-aversion" class="nav-link" data-scroll-target="#risk-aversion"><span class="header-section-number">7.3</span> Risk aversion</a>
  <ul class="collapse">
  <li><a href="#concave-utility-function" id="toc-concave-utility-function" class="nav-link" data-scroll-target="#concave-utility-function"><span class="header-section-number">7.3.1</span> Concave utility function</a></li>
  <li><a href="#modified-axioms" id="toc-modified-axioms" class="nav-link" data-scroll-target="#modified-axioms"><span class="header-section-number">7.3.2</span> Modified axioms</a></li>
  <li><a href="#impossibility-result" id="toc-impossibility-result" class="nav-link" data-scroll-target="#impossibility-result"><span class="header-section-number">7.3.3</span> Impossibility result</a></li>
  </ul></li>
  <li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link" data-scroll-target="#acknowledgements"><span class="header-section-number">7.4</span> Acknowledgements</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./gt.html">Game Theory</a></li><li class="breadcrumb-item"><a href="./07-proportional-sharing.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Proportional rule</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Proportional rule</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&amp;family=Fira+Sans&amp;display=swap" rel="stylesheet"></p>
<p>In the previous chapter, we saw that in the Proof-of-Work protocol the leader for the next round is chosen at random with a probability proportional to a miner’s (or node’s) hash rate <span class="math inline">\mu_i</span> with <span class="math inline">i = 1,\dots,n</span> the indices of the participating miners. That is, the probability that miner <span class="math inline">i</span> becomes the next leader is <span class="math display">
r_i = \frac{\mu_i}{\sum_{j=1}^n \mu_j}.
</span> Recall that the hash rate (or hashing power) of a miner is, roughly speaking, the amount of effort that a miner puts into solving the puzzle that is used to determine the leader of the next round in the Proof-of-Work protocol.</p>
<p>This seems like a decent idea: The more effort you put into solving the puzzle, the more likely it is that you become the next leader. Is this also the “best” thing to do, in some (for now undefined) sense?</p>
<p>For example, as an alternative, we might also simply select the leader uniformly at random after some miner has solved the puzzle.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> However, this would be a bad idea, because then miners do not have any incentive to put effort into the mining process, because performing more work does not increase their chances of becoming the next leader. Furthermore, this also increases the chances of a Sybil attack, as was discussed in the previous chapter (and that we will come back to later).</p>
<p>In this chapter, we will see that cooperative game theory here provides the correct handles to formally prove that the probabilities <span class="math inline">r_i</span> are indeed the optimal way to select the next leader. We will approach this formalization through the lens of allocation rules. We first elaborate on this viewpoint.</p>
<p>Assuming that becoming the leader of the next round yields a reward of <span class="math inline">1</span> unit of cryptocurrency, e.g., Bitcoin, we may also interpret the numbers <span class="math inline">r_i</span> as the <em>expected reward</em> of miner <span class="math inline">i</span>. From the perspective of expected rewards, we may therefore also interpret the individual probabilities of becoming the next leader as individual rewards, and the probability distribution as an <em>allocation rule</em> that allocates every miner its share <span class="math inline">r_i</span>. We would now like to achieve the following.</p>
<p><strong>Goal (informal):</strong> Show that the <em>proportional allocation rule</em>, giving every miner its (expected) share <span class="math inline">r_i</span>, is the only allocation rule that satisfies some desirable properties.</p>
<p>To make this goal more rigorous, let us first give a formal definition of an allocation rule. For simplicity, we will assume that the hash rates are integers values (this is essentially without loss of generality). Recall that <span class="math inline">\mathbb{N} = \{1,2,3,\dots,\}</span> is the set of strictly positive integer numbers. We define <span class="math inline">\mathbb{N}^* = \cup_{n=1} \mathbb{N}^n</span> as the union of all possible vectors of all possible length containing integers (we will explain the need for this later on).</p>
<div id="def-allocation-rule" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 7.1 (Allocation rule)</strong></span> An allocation rule is a function <span class="math inline">x</span> that takes as input an (ordered) hash rate vector <span class="math inline">\mathbf{\mu} = (\mu_1,\dots,\mu_n) \in \mathbb{N}^*</span> and outputs a reward share vector <span class="math inline">x(\mathbf{\mu}) = (x_1(\mathbf{\mu}),\dots,x_n(\mathbf{\mu}))</span> that indicates for every <span class="math inline">i=1,\dots,n</span> the share <span class="math inline">x_i(\mathbf{\mu})</span> they receive.</p>
</div>
<p>By defining the allocation rule as a function with domain <span class="math inline">\mathbb{N}^*</span>, instead of <span class="math inline">\mathbb{N}^n</span> for a fixed <span class="math inline">n</span>, we do not impose any hard restriction on the number of miners can participate. Formally speaking we could also define <span class="math inline">\mathbb{R}^* = \cup_n \mathbb{R}^n</span> and say that <span class="math inline">x(\mu) \in \mathbb{R}^*</span>.</p>
<p>To give an example we define the <em>proportional (allocation) rule</em> <span class="math inline">x^p</span> formally as <span class="math display">
x^p_i(\mu) = \frac{\mu_i}{\sum_{j = 1}^n \mu_j}
</span> for <span class="math inline">i = 1,\dots,n</span> for hash rate vector <span class="math inline">\mu \in \mathbb{N}^*</span> of length <span class="math inline">n</span>.</p>
<section id="axioms" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="axioms"><span class="header-section-number">7.1</span> Axioms</h2>
<p>We will now start to define some desirable properties, also called <em>axioms</em>, that we would like our protocol to have (as a thought exercise, before reading along, you could try to think of some properties yourself).</p>
<p>Perhaps the most natural property to impose is that we want an allocation rule to be <em>nonnegative</em>, meaning that a miner should never get a negative utility from investing in hashing power. Another way of looking at this, is that there can be no form of payment that the miner is charged to participate in the mining.</p>
<blockquote class="blockquote">
<p>(P1) <strong>Nonnegativity</strong>: For any <span class="math inline">\mu \in \mathbb{N}^*</span>, the reward vector <span class="math inline">x(\mu)</span> is nonnegative, i.e., <span class="math inline">x_i(\mu) \geq 0</span> for every <span class="math inline">i = 1,\dots,n</span>.</p>
</blockquote>
<p>Furthermore, if we assume the mining process gives rise to <span class="math inline">1</span> unit of currency, we have to make sure that we do not in total allocate more than <span class="math inline">1</span> unit to the miners This leads to the notion of <em>budget-balance</em>. We can make a distinction between two scenarios: We allocate the mined unit completely (strong budget-balance) or partly (weak budget-balance).</p>
<blockquote class="blockquote">
<p>(P2a) <strong>Weak budget-balance</strong>: The vector <span class="math inline">x(\mu)</span> satisfies <span class="math inline">\sum_{i=1}^n x_i(\mu) \leq 1.</span> <br> (P2b) <strong>Strong budget-balance</strong>: The vector <span class="math inline">x(\mu)</span> satisfies <span class="math inline">\sum_{i=1}^n x_i(\mu) = 1.</span></p>
</blockquote>
<p>There exist other (than Proof-of-Work) blockchain protocols whose allocation schemes could be called weakly budget-balanced, but we do not go into those here.</p>
<p>Moving on to a next natural property, we do not want the name (public key) of a node to have an influence on the outcome of the allocation. In our setting this roughly means that we do not want the index <span class="math inline">i</span> of a miner to play a role in the allocation, but only its hash rate <span class="math inline">\mu_i</span> (as well as the hash rates of the other miners). This also means that miners with the same hash rate will get allocated the same amount.</p>
<p>One way to naturally phrase such an assumption in terms of a symmetry condition. For this we need the notion of a bijective permutation mapping <span class="math inline">\pi</span> that takes as input the ordered vector of hash rates <span class="math inline">\mu</span> and returns a permutation of these rates, i.e., the numbers in the vector in a different order. We slightly abuse notation and write <span class="math inline">\pi(x(\mu))</span> for the re-ordering of the allocation vector according to the same different order.</p>
<blockquote class="blockquote">
<p>(P3) <strong>Symmetry</strong>: For any hash rate vector <span class="math inline">\mu \in \mathbb{N}^*</span> and permutation <span class="math inline">\pi</span>, it holds that <span class="math inline">x(\pi(\mu)) = \pi(x(\mu))</span>.</p>
</blockquote>
<p>This condition states that if we first interchange the hash rates of some nodes and then compute the allocation, this is the same as first computing the allocation on the original hash rate vector and then permuting the allocated amounts.</p>
<p>One important property of a symmetric allocation rule is that miners with the same hash rate get allocated the same amount of cryptocurrency.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Give an allocation rule that is non-negative and strongly budget-balanced, but not symmetric.</p>
</div>
</div>
<p>The axioms we have stated so far are rather natural, in the sense that you might imagine they should also hold for other type of allocation problems. We will now continue with two axioms that are more tailored towards the mining environment of cryptocurrencies like Bitcoin.</p>
<p>In a nutshell the following two axioms ensure that a miner should not be able to benefit from splitting herself up in multiple “proxy” miners, and multiple (true) miners should not be able to benefit from posing as one miner.</p>
<p>Let us start with the first case, which is known as <em>Sybil-proofness</em>. This term comes from the notion of a Sybil attack, where an attacker splits himself up in multiple identities (as was discussed in the previous chapter). Intuitively, Sybil-proofness states that if one miner would split herself up in <span class="math inline">s</span> identities, call this set of identities <span class="math inline">S</span>, and would collect rewards from all the identities in the set <span class="math inline">S</span> according to the allocation rule <span class="math inline">x</span>, then the sum of these rewards should not exceed the reward that miner would have gotten when posing as her true self. In this set-up, the hash rates of all the other miners remains unchanged. More formally, we have the following definition.</p>
<blockquote class="blockquote">
<p>(P4) <strong>Sybil-proofness</strong>: For every hash rate vector <span class="math inline">\mu \in \mathbb{N}^*</span> of length <span class="math inline">n</span> and hash rate vector <span class="math inline">\mu' \in \mathbb{N}^*</span> that is derived by replacing one miner <span class="math inline">i</span> with hash rate <span class="math inline">\mu_i</span> with a finite set <span class="math inline">S</span> of proxy minors with hash rates <span class="math inline">\mu_j'</span> for <span class="math inline">j \in S</span> satisfying <span class="math inline">\sum_{j \in S} \mu_j' \leq \mu_i</span>, and <span class="math inline">\mu_k' = \mu_k</span> for all <span class="math inline">k \notin S</span>, it holds that <span class="math display">
\sum_{j \in S} x_j(\mu') \leq x_i(\mu).
</span></p>
</blockquote>
<p>We leave one ambiguity in this definition, and that is that we do not specify the position of the hash rates of the “proxy” miners in the vector <span class="math inline">\mu'</span>. For example, if we have the hash rate vector <span class="math inline">\mu  = (\mu_1,\mu_2,\mu_3)</span> and we split the second miner into four proxies <span class="math inline">\mu_{2a},\mu_{2b},\mu_{2c}</span> and <span class="math inline">\mu_{2d}</span>, then we can create the (obvious choice) <span class="math display">
\mu' = (\mu_1,\mu_{2a},\mu_{2b},\mu_{2c},\mu_{2d},\mu_3),
</span> but we might also have chosen <span class="math display">
\mu' = (\mu_{2a},\mu_1,\mu_{2b},\mu_{2d},\mu_3,\mu_{2c}).
</span> If you would like to fix a convention you can go for the first choice of <span class="math inline">\mu'</span> above, that inserts the proxy miners at position <span class="math inline">i</span>. However, if we assume that the allocation rule <span class="math inline">x</span> is also symmetric, then it does not matter where we insert the proxy miners in the vector, because the allocation only depends on the hash rates then, and not the miner identities.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Show that the uniform allocation rule, defined for a vector <span class="math inline">\mu \in \mathbb{N}^*</span> of length <span class="math inline">n</span> by <span class="math display">
x_i(\mu) = \frac{1}{n}
</span> for <span class="math inline">i = 1,\dots,n</span>, is <em>not</em> Sybil-proof.</p>
</div>
</div>
<p>We continue with the second case, known as <em>collusion-proofness</em> (collusion means “samenzwering” in Dutch). Intuitively, this axiom states that if multiple miners would pose as one miner, with a hash rate that is at most the sum of their individual hash rates, then the reward of this single miner is at most the sum of the rewards that the individual miners would have gotten. Again, the hash rate of all the other miner remains unchanged.</p>
<blockquote class="blockquote">
<p>(P5) <strong>Collusion-proofness</strong>: For every hash rate vector <span class="math inline">\mu \in \mathbb{N}^*</span> of length <span class="math inline">n</span> and hash rate vector <span class="math inline">\mu' \in \mathbb{N}^*</span> that is obtained by replacing a set of miners <span class="math inline">T</span> by one new miner <span class="math inline">i^*</span> with hash rate <span class="math inline">\mu_{i^*}'</span> satisfying <span class="math inline">\mu_{i^*}' \leq \sum_{i \in T} \mu_i</span>, and <span class="math inline">\mu_k' = \mu_k</span> for all <span class="math inline">k \neq i^*</span>, it holds that <span class="math display">
x_{i^*}(\mu') \leq \sum_{i \in T} x_i(\mu).
</span></p>
</blockquote>
<p>The same ambiguity as in the definition of Sybil-proofness is also present here: There is some freedom in where to place <span class="math inline">i^*</span> in the vector of miners. If you want, you can use the convention that we place <span class="math inline">i^*</span> at the lexicographically smallest position chosen among those from miners <span class="math inline">j \in T</span>. Again, if <span class="math inline">x</span> is a symmetric allocation rule, then it does not matter where we insert (the hash rate of) <span class="math inline">i^*</span> in the vector.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Show that the proportional allocation rule <span class="math inline">x^p</span> satisfies Sybil- and collusion-proofness (the arguments for both properties are similar).</p>
</div>
</div>
<p>At this point, you are invited to thing about other natural properties/axioms that an allocation rule of a blockchain protocol should satisfy. It turns out, however, that the properties we have defined so far are sufficient to characterize the proportional allocation rule.</p>
</section>
<section id="characterization" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="characterization"><span class="header-section-number">7.2</span> Characterization</h2>
<p>In this section, we will show that the proportional rule is the only allocation rule that satisfies symmetry (P2), strong budget-balance (P3a), Sybil-proofness (P4) and collusion-proofness (P5)! We summarize this in the following theorem.</p>
<div id="thm-characterization" class="theorem">
<p><span class="theorem-title"><strong>Theorem 7.1 (Characterization of proportional rule)</strong></span> The proportional allocation rule <span class="math inline">x</span> that maps a vector <span class="math inline">\mu \in \mathbb{N}^*</span> of length <span class="math inline">n</span> to the vector <span class="math inline">x(\mu)</span> with <span class="math display">
x_i(\mu) = \frac{\mu_i}{\sum_{j=1}^n \mu_j}
</span> is the only allocation rule that satisfies symmetry (P2), strong budget-balance (P3a), Sybil-proofness (P4) and collusion-proofness (P5).</p>
</div>
<div class="proof">
<p><span class="proof-title"><em>Proof</em>. </span>In the previous section, we have shown (either in the text or in an exercise) that the proportional allocation rule satisfies (P2), (P3a), (P4) and (P5). It therefore remains to show that this is the <em>only</em> allocation rule that satisfies these four properties simultaneously. Therefore, assume that <span class="math inline">x</span> is an allocation rule that satisfies (P2), (P3a), (P4) and (P5).</p>
<p>Recall that the vector <span class="math inline">\mu</span> only contains integers greater or equal than <span class="math inline">1</span>. We will prove the statement using induction on the number of entries strictly greater than <span class="math inline">1</span> in the vector <span class="math inline">\mu</span>. For a given vector <span class="math inline">\mu</span>, we use <span class="math inline">t</span> to denote this number, i.e., <span class="math display">
t = |\{i : \mu_i &gt; 1\}|.
</span></p>
<p>The base case is <span class="math inline">t = 0</span>, i.e., <span class="math inline">\mu</span> is the all-ones vector <span class="math inline">\mu = (1,1,\dots,1)</span>. Because of symmetry we then know that <span class="math inline">x_i(\mu) = x_j(\mu)</span> for all <span class="math inline">i,j \in [n] = \{1,\dots,n\}</span>. Because of strong budget-balance we have <span class="math inline">\sum_{i} x_i(\mu) = 1</span>, but then it must be that <span class="math inline">x_i(\mu) = 1/n = \mu_i/(\sum_j \mu_j)</span> for all <span class="math inline">i = 1,\dots,n</span>, which means that <span class="math inline">x</span> is indeed the proportional allocation rule.</p>
<p>For the inductive step, with respect to <span class="math inline">t</span>, the induction hypothesis now states that <span class="math inline">x</span> corresponds to the proportional allocation rule for all <span class="math inline">\mu \in \mathbb{N}^*</span> with at most <span class="math inline">t-1</span> entries strictly greater than <span class="math inline">1</span>. We will show that the same holds for all vectors with <span class="math inline">t</span> entries strictly greater than <span class="math inline">1</span>. (It is important to observe that the induction hypothesis does not fix the value of <span class="math inline">n</span>.)</p>
<p>Therefore, let <span class="math inline">x</span> be an allocation rule with precisely <span class="math inline">t</span> entries strictly greater than <span class="math inline">1</span>. We assume without loss of generality (again because of symmetry) that <span class="math inline">\mu_1,\dots,\mu_t &gt; 1</span> and <span class="math inline">\mu_{t+1},\dots,\mu_n = 1</span>. Let <span class="math display">
m = \sum_{i=1}^n \mu_i
</span> be the total hash rate of the vector <span class="math inline">\mu</span>.</p>
<p>We first show that for all <span class="math inline">i \in \{1,\dots,t\} = [t]</span> it holds that <span class="math inline">x_i(\mu) = \mu_i/(\sum_j \mu_j)</span>, i.e., that every miner <span class="math inline">i \in [t]</span> is allocated their proportional share. We will do this using a proof by contradiction. We show that if <span class="math inline">x_i(\mu) &gt; \mu_i/(\sum_j \mu_j)</span>, then <span class="math inline">x</span> is not collusion-proof, and, using a similar argument, that if <span class="math inline">x_i(\mu) &lt; \mu_i/(\sum_j \mu_j)</span>, then <span class="math inline">x</span> is not Sybil-proof. We will come back to the miners with index <span class="math inline">i \in \{t+1,\dots,n\}</span> at the end of the proof.</p>
<p>First suppose that <span class="math inline">x_i(\mu) &gt; \mu_i/(\sum_j \mu_j)</span> for some <span class="math inline">i \in [t]</span>. Consider the new vector <span class="math inline">\mu'</span> in which we split miner <span class="math inline">i</span> into <span class="math inline">\mu_i</span> “proxy” miners which we denote with the set <span class="math inline">S</span> (so that <span class="math inline">\mu_i = |S|</span>). Note that <span class="math inline">\mu'</span> has length <span class="math inline">n - 1 + |S|</span>. Recall that because <span class="math inline">x</span> is symmetric, it does not matter where in the vector <span class="math inline">\mu</span> we insert these new miners. Note that <span class="math inline">\mu'</span> has at most <span class="math inline">t - 1</span> entries strictly greater than <span class="math inline">1</span> (because <span class="math inline">\mu_i</span> is no longer there) and that <span class="math display">
\sum_{k=1}^{n-1+|S|} \mu_k' = m.
</span> The induction hypothesis now tells us that in particular all the miners in <span class="math inline">j \in S</span> (with <span class="math inline">\mu_j' = 1</span>) get their proportional share, i.e., <span class="math inline">x_j(\mu') = 1/(\sum_k \mu_k') = 1/m</span>, meaning that <span class="math display">
\sum_{j \in S} x_j(\mu') = \frac{|S|}{m} = \frac{\mu_i}{\sum_j \mu_j} &lt; x_i(\mu)
</span> The last inequality states that if in <span class="math inline">\mu'</span>, the miners in <span class="math inline">S</span> would collude and pose as one miner <span class="math inline">i</span>, they can together get a higher total reward. This violates collusion-proofness (P5).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Show that if, for <span class="math inline">i \in [t]</span>, it holds that <span class="math inline">x_i(\mu) &lt; \mu_i/(\sum_j \mu_j)</span>, then <span class="math inline">x</span> is not Sybil-proof.</p>
</div>
</div>
<p>From the above (including the exercise), we can conclude that <span class="math inline">x_i(\mu) = \mu_i/(\sum_j \mu_j)</span> for all <span class="math inline">i \in [t]</span>. It remains to show that for <span class="math inline">i \in \{t+1,\dots,n\}</span>, i.e., the miners with <span class="math inline">\mu_i = 1</span>, it holds that <span class="math inline">x_i(\mu) = 1/m</span>. Because all miners <span class="math inline">i \in [t]</span> get their proportional share, strong budget-balance implies that <span class="math display">
\sum_{i=t+1}^{n} x_i(\mu) = \frac{t + 2 - n}{m}
</span> and because of symmetry, it then must hold that <span class="math inline">x_i(\mu) = 1/m</span> for all miners <span class="math inline">i \in \{t+1,\dots,n\}</span>. This completes the proof.</p>
</div>
</section>
<section id="risk-aversion" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="risk-aversion"><span class="header-section-number">7.3</span> Risk aversion</h2>
<p>Our characterization in <a href="#thm-characterization" class="quarto-xref">Theorem&nbsp;<span>7.1</span></a> tells us that the proportional allocation rule is collusion-proof. Does this correspond with miner’s behavior in reality? The answer (unfortunately) is no: Miners often join a <em>mining pool</em> that effectively acts as a single miner with the combined hash rate of the individual miners, i.e., miners collude. You can have a look at the biggest mining pools for Bitcoin <a href="https://www.blockchain.com/en/pools">here</a>.</p>
<p>Is there a way to explain this behaviour in our axiomatic framework? After all, our characterization says that miners should have no incentive to collude. Let us have a look at the following two scenarios:</p>
<ol type="1">
<li>There are <span class="math inline">100</span> individual miners each with hash rate <span class="math inline">1</span>.</li>
<li>There are <span class="math inline">4</span> mining pools consisting each of <span class="math inline">25</span> miners. Every pool has a hash rate of <span class="math inline">25</span>. If a pool is the first to solve the puzzle, the earned unit of cryptocurrency is split evenly (i.e., proportionally) between the <span class="math inline">25</span> miners in the pool.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Which scenario would you, as a miner, prefer and what is your (mathematical) motivation for this?</p>
</div>
</div>
<p>Let’s make the scenarios a bit more formal and interpret the reward of an individual miner as random variables <span class="math inline">X_1</span> and <span class="math inline">X_2</span> for Scenarios 1 and 2, respectively. Then we have <span class="math display">
X_1 = \left\{
\begin{array}{ll}
1 &amp; \text{with probability } \frac{1}{100} \\[1ex]
0 &amp; \text{with probability } \frac{99}{100}
\end{array}\right. \ \text{ and } \
X_2 = \left\{
\begin{array}{ll}
\frac{1}{25} &amp; \text{with probability } \frac{1}{4} \\[1ex]
0 &amp; \text{with probability } \frac{3}{4}
\end{array}.\right.
</span></p>
<p>Observe that <span class="math inline">\mathbb{E}[X_1] = \frac{1}{100} = \frac{1}{4}\cdot\frac{1}{25} = \mathbb{E}[X_2]</span>. This means that a <em>risk-neutral</em> miner, that only cares about maximizing their expectation, is indifferent between the scenarios.</p>
<p>However, looking at the variance we see a significant difference. We have <span class="math display">
\text{Var}[X_1] = \frac{1}{100}\left(1 - \frac{1}{100}\right)^2 + \frac{99}{100}\left(0 - \frac{1}{100}\right)^2 \approx 0.01
</span> and <span class="math display">
\text{Var}[X_2] = \frac{1}{4}\left(\frac{1}{25} - \frac{1}{100}\right)^2 + \frac{3}{4}\left(0 - \frac{1}{100}\right)^2 \approx 0.0003,
</span> so the variance in the first scenario is rouhgly <span class="math inline">33</span> times higher than in the second scenario. A <em>risk-averse</em> miner who (in this example) also wants to keep the variance small in case of equal expected reward between different scenarios, will therefore have a strong preference for the second scenario.</p>
<section id="concave-utility-function" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1" class="anchored" data-anchor-id="concave-utility-function"><span class="header-section-number">7.3.1</span> Concave utility function</h3>
<p>There are many different ways to formalize the notion of <em>risk-aversion</em>. One way of doing this is by introducing a strictly concave utility function <span class="math inline">U : [0,1] \rightarrow \mathbb{R}_{\geq 0}</span> with <span class="math inline">U(1) &gt; U(0) = 0</span> for the miners. The domain of this function is <span class="math inline">[0,1]</span> to model, roughly speaking, that in total we have one unit of cryptocurrency as reward. The utility of a miner is its (random) reward evaluated in the utility function.</p>
<p>In theory, you could introduce a different utility function <span class="math inline">U_i</span> for every miner <span class="math inline">i</span>, but to keep the exposition simple, we use a common utility function. Recall that the definition of concavity is as follows.</p>
<div id="def-concavity" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 7.2 (Concavity)</strong></span> A function <span class="math inline">U : [0,1] \rightarrow \mathbb{R}_{\geq 0}</span> is <em>concave</em> if for every <span class="math inline">\lambda \in (0,1)</span> and <span class="math inline">y,z \in [0,1]</span>, it holds that <span class="math display">
\lambda U(y) + (1-\lambda) U(z) \leq U(\lambda y + (1-\lambda z)).
</span> A function <span class="math inline">U</span> is <em>strictly concave</em> if the inequality holds with strict inequality always.</p>
</div>
<p>We emphasize at this point that the variance-example above cannot directly be explained by introducing a concave utility function <span class="math inline">U</span>, but was used instead only to develop some intuition.</p>
<p>So then how does a concave utility function model risk aversion? For this, we can have a look at <a href="https://en.wikipedia.org/wiki/Jensen%27s_inequality">Jensen’s inequality</a><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> which in our setting says that <span class="math inline">\mathbb{E}[U(X)] \leq U(\mathbb{E}[X])</span>. Let us look at a small example, where this inequality follows directly from the definition of concavity.</p>
<p>Recall the random variable <span class="math inline">\mathbb{E}[X_1]</span> from above and consider the following two scenarios.</p>
<!--
<ol type="A">
  <li>There are $100$ individual miners each with hash rate $1$.</li>
  <li>There are $4$ mining pools consisting each of $25$ miners, and every pool has a hash rate of $25$. If a pool is the first to solve the puzzle, the earned unit of cryptocurrency is split evenly (i.e., proportionally) between the $25$ miners in the pool.</li>
</ol>
-->
<ol start="3" type="1">
<li>All miners collude and get a deterministic reward of <span class="math inline">1/100 = \mathbb{E}[X_1]</span> each.</li>
<li>The winner is chosen as a realization of <span class="math inline">X_1</span>, i.e., every miner is chosen with probability <span class="math inline">1/100</span> and the chosen miner receives a reward of <span class="math inline">1</span>.</li>
</ol>
<p>In Scenario 3, the (deterministic) utility for every miner is <span class="math inline">U(\mathbb{E}[X_1])</span> and in Scenario 4 the expected utility under <span class="math inline">U</span> is <span class="math display">
\mathbb{E}[U(X_1)] = \frac{1}{100}U(1) + \frac{99}{100} U(0) \leq U\left(\frac{1}{100} \cdot 1 + \frac{99}{100} \cdot 0\right) = U(\mathbb{E}[X_1])
</span> by the concavity of <span class="math inline">U</span>. In other words, a miner prefers Scenario 3 over 4 if their objective is to maximize their (expected) utility (in case of equality they are indifferent between the scenarios).</p>
</section>
<section id="modified-axioms" class="level3" data-number="7.3.2">
<h3 data-number="7.3.2" class="anchored" data-anchor-id="modified-axioms"><span class="header-section-number">7.3.2</span> Modified axioms</h3>
<p>To study the utility model in the context of allocation rules, we need to slightly adjust some of the axioms introduced in the first section. In this section, we go back to the probabilisitic interpretation of allocation rules. That is, for a given allocation rule <span class="math inline">x</span> and hash rate vector <span class="math inline">\mu</span>, <span class="math inline">x_i(\mu)</span> is the probability with which miner <span class="math inline">i</span> receives the unit reward, so that the expected utility of miner <span class="math inline">i</span> becomes <span class="math display">
x_i(\mu) \cdot U(1).
</span></p>
<p>What are the appropriate ways of formulating the axioms of symmetry, budget-balacne, Sybil-proofness and collusion-proofness in this setting?</p>
<p>With the probabilistic interpretatino of the allocation rule <span class="math inline">x</span>, we can leave the definitions of symmetry and budget-balance unchanged. Symmetry states that if two miners have the same hash rate they should have the same probability of winning the unit reward, and budget-balance states that the probabilities with with the reward is allocated should sum up to <span class="math inline">1</span> (strong budget-balance) or at most <span class="math inline">1</span> (weak budget-balance).</p>
<p>The definition of Sybil-proofness only requires a conceptual change, that does not alter the mathematical definition that we gave in <span class="math inline">(P4)</span>. If a miner split herself up in a set <span class="math inline">T</span> of proxy miners, then here expected utility is the sum of the utilities derived from the individual proxy miners. This leads to the following definition of Sybil-proofness for an arbitrary allocation rule <span class="math inline">x</span>.</p>
<blockquote class="blockquote">
<p>(P4-U) <strong>Sybil-proofness</strong>: For every hash rate vector <span class="math inline">\mu \in \mathbb{N}^*</span> of length <span class="math inline">n</span> and hash rate vector <span class="math inline">\mu' \in \mathbb{N}^*</span> that is derived by replacing one miner <span class="math inline">i</span> with hash rate <span class="math inline">\mu_i</span> with a finite set <span class="math inline">S</span> of proxy minors with hash rates <span class="math inline">\mu_j'</span> for <span class="math inline">j \in S</span> satisfying <span class="math inline">\sum_{j \in S} \mu_j' \leq \mu_i</span>, and <span class="math inline">\mu_k' = \mu_k</span> for all <span class="math inline">k \notin S</span>, it holds that <span class="math display">
\sum_{j \in S} x_j(\mu') \cdot U(1) \leq x_i(\mu) \cdot U(1).
</span></p>
</blockquote>
<p>This definition is equivalent to <span class="math inline">(P4)</span> because <span class="math inline">U(1) &gt; 0</span>. This follows from the fact that <span class="math inline">U(0) = 0</span> and that we assume that <span class="math inline">U(1)</span> is strictly increasing.</p>
<p>A more significant change has to be made in the definition of collusion-proofness (P5). We want to protect ourselves against the formation of pools in which miners deterministically share the unit reward (it they win it) proportionally to their hash rates (similar to the opening example of this section). In other words, the sum of the expected utilities of the colluding miners posing as one miner <span class="math inline">i^*</span> should be no greater that the sum of original expected utilities of these miners. This leads to the following definition for an arbitrary allocation rule <span class="math inline">x</span>.</p>
<blockquote class="blockquote">
<p>(P5-U) <strong><span class="math inline">U</span>-collusion-proofness</strong>: For every hash rate vector <span class="math inline">\mu \in \mathbb{N}^*</span> of length <span class="math inline">n</span> and hash rate vector <span class="math inline">\mu' \in \mathbb{N}^*</span> that is obtained by replacing a set of miners <span class="math inline">T</span> by one new miner <span class="math inline">i^*</span> with hash rate <span class="math inline">\mu_{i^*}'</span> satisfying <span class="math inline">\mu_{i^*}' \leq \sum_{i \in T} \mu_i</span>, and <span class="math inline">\mu_k' = \mu_k</span> for all <span class="math inline">k \neq i^*</span>, it holds that <span class="math display">
\sum_{i \in T} x_{i^*}(\mu')\cdot U\left(\frac{\mu_i}{\sum_{i \in T} \mu_i}\right) \leq \sum_{i \in T} x_i(\mu)\cdot U(1).
</span></p>
</blockquote>
<p>One implication of (P5-U) is that whenever a group of miners collude, at least one of them will have a worse utility than before the collusion.</p>
<p>Unfortunately, our proportional allocation rule <span class="math inline">x^p</span> that assigns the unit reward to miner <span class="math inline">i</span> with probability proportional to <span class="math inline">\mu_i</span>, does not satisfy <span class="math inline">U</span>-collusion-proofness. We investigate this in the following two exercises.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Suppose that <span class="math inline">U(y) = \sqrt{y}</span> and consider the hash rate vector <span class="math inline">\mu = (3,4)</span>. Show that the proportional allocation rule <span class="math inline">x^p</span> that assigns the unit reward with probability <span class="math inline">3/7</span> to the first miner, and with probability <span class="math inline">4/7</span> to the second miner, does not satisfy <span class="math inline">U</span>-collusion-proofness.</p>
</div>
</div>
<p>It is possible to generalize this example to any choice of strictly concave utility function <span class="math inline">U</span> and hash rate vector <span class="math inline">\mu \in \mathbb{N}^*</span>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Let <span class="math inline">U</span> be any strictly concave function with <span class="math inline">U(0) = 0</span>. Show that (P5-U) is not satisfied for any choice of <span class="math inline">\mu \in \mathbb{N}^*</span> when <span class="math inline">x = x^p</span>. <em>Hint: Take <span class="math inline">T</span> to be the set of all miners.</em></p>
</div>
</div>
</section>
<section id="impossibility-result" class="level3" data-number="7.3.3">
<h3 data-number="7.3.3" class="anchored" data-anchor-id="impossibility-result"><span class="header-section-number">7.3.3</span> Impossibility result</h3>
<p>We ended the previous section with the observation that the proportional allocation rule, i.e., the allocation rule used in the Proof-of-Work protocol, does not satisfy <span class="math inline">U</span>-collusion-proofness in the context of risk-averse miners. In fact, the assumption is violated for any strictly concave utility function and hash rate vector. Is there another allocation rule that does satisfy the adjusted notion of collision-proofness?</p>
<p>Yes, we could define allocation rules that satisfy the adjusted collusion-proofness definition, however, it turns out that this is not possible if we simultaneously also want to satisfy symmetry, budget-balance and Sybil-proofness!</p>
<p>This shows that risk-aversion is not only a problem for the proportional allocation rule, but in fact this is an inherently difficult behavior to deal with in a blockchain protocol as it cannot be addressed by adjusting the allocation rule.</p>
<p>We summarize the formal impossibility result in the theorem below.</p>
<div id="thm-impossibility" class="theorem">
<p><span class="theorem-title"><strong>Theorem 7.2 (Impossibility result)</strong></span> Let <span class="math inline">U</span> be a strictly concave utility function with <span class="math inline">U(1) &gt; U(0) = 0</span>. There does not exist an allocation rule that is symmetric (P2), strongly budget-balanced (P3), Sybil-proof (P4-U), and <span class="math inline">U</span>-collision-proof (P5-U).</p>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prove <a href="#thm-impossibility" class="quarto-xref">Theorem&nbsp;<span>7.2</span></a>. <em>Hint: First have a suitable chosen miner split into proxies, which then collude again. Derive a contradiction based on the properties of <span class="math inline">U</span> using an argument of a similar flavor as for the last exercise of the previous section.</em></p>
</div>
</div>
</section>
</section>
<section id="acknowledgements" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="acknowledgements"><span class="header-section-number">7.4</span> Acknowledgements</h2>
<p>This chapter is based on the the paper “An Axiomatic Approach to Block Rewards” by Xi Chen, Christos Papadimitriou and Tim Roughgarden, that can be found <a href="https://arxiv.org/pdf/1909.10645"> here </a>. Our assumption (P5-U) is slightly different than the corresponding assumption in this paper. Feel free to have a look at the other results of this paper!</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>This would only work in the permissioned setting, where we know the number of nodes/miners in the system. The statement here is only meant to be a thought experiment. In principle, there are (theoretical) protocols that could mimic any type of permissioned allocation in the permissionless setting.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Jensen’s inequality is typically stated for convex functions. Recall that a function <span class="math inline">U</span> is concave if and only if the function <span class="math inline">-U</span> is convex.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./gt.html" class="pagination-link" aria-label="Game Theory">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Game Theory</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>